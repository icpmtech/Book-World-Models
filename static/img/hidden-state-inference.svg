<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 340" width="640" height="340" font-family="Segoe UI, Arial, sans-serif">
  <!-- Background -->
  <rect width="640" height="340" fill="#f8f9fa" rx="12"/>

  <!-- Title -->
  <text x="320" y="30" text-anchor="middle" font-size="16" font-weight="bold" fill="#1a1a2e">Hidden State Inference in a Financial World Model</text>

  <!-- ─── Column 1: Observable Inputs ─── -->
  <text x="95" y="62" text-anchor="middle" font-size="12" font-weight="bold" fill="#555">Observable Inputs</text>

  <rect x="20"  y="72"  width="150" height="30" rx="6" fill="#ddeeff" stroke="#3498db" stroke-width="1.2"/>
  <text x="95"  y="92"  text-anchor="middle" font-size="11" fill="#1a3a5c">Interest Rates</text>

  <rect x="20"  y="112" width="150" height="30" rx="6" fill="#ddeeff" stroke="#3498db" stroke-width="1.2"/>
  <text x="95"  y="132" text-anchor="middle" font-size="11" fill="#1a3a5c">Inflation</text>

  <rect x="20"  y="152" width="150" height="30" rx="6" fill="#ddeeff" stroke="#3498db" stroke-width="1.2"/>
  <text x="95"  y="172" text-anchor="middle" font-size="11" fill="#1a3a5c">Equity Returns</text>

  <rect x="20"  y="192" width="150" height="30" rx="6" fill="#ddeeff" stroke="#3498db" stroke-width="1.2"/>
  <text x="95"  y="212" text-anchor="middle" font-size="11" fill="#1a3a5c">Volatility (VIX)</text>

  <rect x="20"  y="232" width="150" height="30" rx="6" fill="#ddeeff" stroke="#3498db" stroke-width="1.2"/>
  <text x="95"  y="252" text-anchor="middle" font-size="11" fill="#1a3a5c">Credit Spreads</text>

  <!-- Arrows: inputs → encoder -->
  <line x1="170" y1="87"  x2="230" y2="155" stroke="#888" stroke-width="1.5" marker-end="url(#arr2)"/>
  <line x1="170" y1="127" x2="230" y2="163" stroke="#888" stroke-width="1.5" marker-end="url(#arr2)"/>
  <line x1="170" y1="167" x2="230" y2="172" stroke="#888" stroke-width="1.5" marker-end="url(#arr2)"/>
  <line x1="170" y1="207" x2="230" y2="180" stroke="#888" stroke-width="1.5" marker-end="url(#arr2)"/>
  <line x1="170" y1="247" x2="230" y2="188" stroke="#888" stroke-width="1.5" marker-end="url(#arr2)"/>

  <!-- ─── Column 2: Encoder ─── -->
  <rect x="230" y="130" width="110" height="85" rx="10" fill="#8e44ad" opacity="0.88"/>
  <text x="285" y="163" text-anchor="middle" font-size="13" font-weight="bold" fill="#fff">Encoder</text>
  <text x="285" y="181" text-anchor="middle" font-size="10" fill="#eee">(Vision Model)</text>
  <text x="285" y="200" text-anchor="middle" font-size="10" fill="#eee">Compress → z_t</text>

  <!-- Arrow: encoder → latent state -->
  <line x1="340" y1="172" x2="395" y2="172" stroke="#555" stroke-width="2" marker-end="url(#arr2)"/>

  <!-- ─── Column 3: Latent State ─── -->
  <ellipse cx="435" cy="172" rx="42" ry="42" fill="#f39c12" opacity="0.9"/>
  <text x="435" y="167" text-anchor="middle" font-size="13" font-weight="bold" fill="#fff">z_t</text>
  <text x="435" y="183" text-anchor="middle" font-size="10" fill="#fff">Latent</text>
  <text x="435" y="196" text-anchor="middle" font-size="10" fill="#fff">State</text>

  <!-- Arrow: latent state → classifier -->
  <line x1="477" y1="172" x2="527" y2="172" stroke="#555" stroke-width="2" marker-end="url(#arr2)"/>

  <!-- ─── Column 4: Regime Classifier ─── -->
  <rect x="527" y="105" width="95" height="135" rx="10" fill="#1a7a4a" opacity="0.88"/>
  <text x="574" y="130" text-anchor="middle" font-size="11" font-weight="bold" fill="#fff">Regime</text>
  <text x="574" y="145" text-anchor="middle" font-size="11" font-weight="bold" fill="#fff">Classifier</text>

  <rect x="537" y="156" width="75" height="19" rx="4" fill="#2ecc71" opacity="0.85"/>
  <text x="574" y="170" text-anchor="middle" font-size="10" fill="#fff">Expansion</text>

  <rect x="537" y="180" width="75" height="19" rx="4" fill="#e67e22" opacity="0.85"/>
  <text x="574" y="194" text-anchor="middle" font-size="10" fill="#fff">Overheating</text>

  <rect x="537" y="204" width="75" height="19" rx="4" fill="#e74c3c" opacity="0.85"/>
  <text x="574" y="218" text-anchor="middle" font-size="10" fill="#fff">Contraction</text>

  <rect x="537" y="228" width="75" height="19" rx="4" fill="#3498db" opacity="0.85"/>
  <text x="574" y="242" text-anchor="middle" font-size="10" fill="#fff">Recovery</text>

  <!-- Bottom note -->
  <text x="320" y="310" text-anchor="middle" font-size="11" fill="#888">Observable market signals are compressed into a latent vector z_t that encodes the hidden regime.</text>

  <!-- Arrow marker -->
  <defs>
    <marker id="arr2" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#555"/>
    </marker>
  </defs>
</svg>
