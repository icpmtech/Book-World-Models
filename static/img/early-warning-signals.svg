<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 380" width="680" height="380" font-family="Segoe UI, Arial, sans-serif">
  <!-- Background -->
  <rect width="680" height="380" fill="#f8f9fa" rx="12"/>

  <!-- Title -->
  <text x="340" y="30" text-anchor="middle" font-size="16" font-weight="bold" fill="#1a1a2e">Early Warning Signals — Regime Transition Detection</text>

  <!-- ─── Top panel: Latent state drift ─── -->
  <rect x="20" y="45" width="310" height="145" rx="8" fill="#fff" stroke="#ddd" stroke-width="1.2"/>
  <text x="175" y="65" text-anchor="middle" font-size="12" font-weight="bold" fill="#444">1. Latent State Drift (z_t)</text>

  <!-- Mini chart axes -->
  <line x1="50" y1="75" x2="50" y2="175" stroke="#ccc" stroke-width="1"/>
  <line x1="50" y1="175" x2="305" y2="175" stroke="#ccc" stroke-width="1"/>
  <text x="30" y="80" text-anchor="middle" font-size="9" fill="#888">z₂</text>
  <text x="310" y="178" text-anchor="end" font-size="9" fill="#888">time →</text>

  <!-- Expansion zone fill -->
  <rect x="51" y="75" width="90" height="100" fill="#2ecc71" opacity="0.10"/>
  <text x="96" y="95" text-anchor="middle" font-size="9" fill="#27ae60" font-style="italic">Expansion</text>

  <!-- Overheating zone fill -->
  <rect x="141" y="75" width="70" height="100" fill="#e67e22" opacity="0.10"/>
  <text x="176" y="95" text-anchor="middle" font-size="9" fill="#e67e22" font-style="italic">Overheat</text>

  <!-- Contraction zone fill -->
  <rect x="211" y="75" width="94" height="100" fill="#e74c3c" opacity="0.10"/>
  <text x="258" y="95" text-anchor="middle" font-size="9" fill="#e74c3c" font-style="italic">Contraction</text>

  <!-- z_t trajectory line drifting from expansion to contraction -->
  <polyline points="55,155 75,152 95,148 115,144 135,138 155,128 175,118 195,105 215,115 235,125 255,135 280,138 300,140"
    fill="none" stroke="#8e44ad" stroke-width="2.2" stroke-linejoin="round"/>

  <!-- Alert point -->
  <circle cx="195" cy="105" r="5" fill="#e74c3c"/>
  <text x="205" y="102" font-size="9" fill="#e74c3c" font-weight="bold">Drift alert</text>

  <!-- ─── Top-right panel: Regime probability bars ─── -->
  <rect x="350" y="45" width="310" height="145" rx="8" fill="#fff" stroke="#ddd" stroke-width="1.2"/>
  <text x="505" y="65" text-anchor="middle" font-size="12" font-weight="bold" fill="#444">2. Regime Probability Shift</text>

  <!-- Week 1 bars -->
  <text x="390" y="82" text-anchor="middle" font-size="9" fill="#888">Week 0</text>
  <rect x="370" y="84" width="40" height="70" rx="3" fill="#2ecc71" opacity="0.3" stroke="#2ecc71" stroke-width="1"/>
  <rect x="370" y="84" width="40" height="58" rx="3" fill="#2ecc71" opacity="0.7"/>
  <text x="390" y="157" text-anchor="middle" font-size="8" fill="#27ae60">Exp 83%</text>

  <text x="440" y="82" text-anchor="middle" font-size="9" fill="#888">Week 4</text>
  <rect x="420" y="84" width="40" height="70" rx="3" fill="#e67e22" opacity="0.3" stroke="#e67e22" stroke-width="1"/>
  <rect x="420" y="84" width="40" height="33" rx="3" fill="#2ecc71" opacity="0.7"/>
  <rect x="420" y="117" width="40" height="21" rx="3" fill="#e67e22" opacity="0.7"/>
  <text x="440" y="157" text-anchor="middle" font-size="8" fill="#444">E:47% O:30%</text>

  <text x="490" y="82" text-anchor="middle" font-size="9" fill="#888">Week 8</text>
  <rect x="470" y="84" width="40" height="70" rx="3" fill="#e74c3c" opacity="0.3" stroke="#e74c3c" stroke-width="1"/>
  <rect x="470" y="84" width="40" height="11" rx="3" fill="#2ecc71" opacity="0.7"/>
  <rect x="470" y="95" width="40" height="28" rx="3" fill="#e67e22" opacity="0.7"/>
  <rect x="470" y="123" width="40" height="21" rx="3" fill="#e74c3c" opacity="0.7"/>
  <text x="490" y="157" text-anchor="middle" font-size="8" fill="#e74c3c">C:30% alert</text>

  <text x="545" y="82" text-anchor="middle" font-size="9" fill="#888">Week 12</text>
  <rect x="520" y="84" width="40" height="70" rx="3" fill="#e74c3c" opacity="0.3" stroke="#e74c3c" stroke-width="1.8"/>
  <rect x="520" y="84" width="40" height="4" rx="3" fill="#2ecc71" opacity="0.7"/>
  <rect x="520" y="88" width="40" height="10" rx="3" fill="#e67e22" opacity="0.7"/>
  <rect x="520" y="98" width="40" height="56" rx="3" fill="#e74c3c" opacity="0.85"/>
  <text x="540" y="157" text-anchor="middle" font-size="8" fill="#e74c3c" font-weight="bold">Contr 80%</text>

  <text x="600" y="82" text-anchor="middle" font-size="9" fill="#888">Week 16</text>
  <rect x="575" y="84" width="40" height="70" rx="3" fill="#3498db" opacity="0.3" stroke="#3498db" stroke-width="1"/>
  <rect x="575" y="84" width="40" height="42" rx="3" fill="#e74c3c" opacity="0.7"/>
  <rect x="575" y="126" width="40" height="28" rx="3" fill="#3498db" opacity="0.7"/>
  <text x="595" y="157" text-anchor="middle" font-size="8" fill="#3498db">C:60% R:40%</text>

  <!-- Legend for regime colors -->
  <rect x="360" y="168" width="10" height="10" rx="2" fill="#2ecc71"/>
  <text x="375" y="177" font-size="9" fill="#444">Expansion</text>
  <rect x="430" y="168" width="10" height="10" rx="2" fill="#e67e22"/>
  <text x="445" y="177" font-size="9" fill="#444">Overheating</text>
  <rect x="513" y="168" width="10" height="10" rx="2" fill="#e74c3c"/>
  <text x="528" y="177" font-size="9" fill="#444">Contraction</text>
  <rect x="593" y="168" width="10" height="10" rx="2" fill="#3498db"/>
  <text x="608" y="177" font-size="9" fill="#444">Recovery</text>

  <!-- ─── Bottom panel: Predictive entropy ─── -->
  <rect x="20" y="205" width="640" height="140" rx="8" fill="#fff" stroke="#ddd" stroke-width="1.2"/>
  <text x="340" y="225" text-anchor="middle" font-size="12" font-weight="bold" fill="#444">3. Predictive Entropy — Rising Uncertainty Before Confirmed Transition</text>

  <!-- Axes -->
  <line x1="55" y1="235" x2="55" y2="330" stroke="#ccc" stroke-width="1"/>
  <line x1="55" y1="330" x2="635" y2="330" stroke="#ccc" stroke-width="1"/>
  <text x="40" y="240" text-anchor="middle" font-size="9" fill="#888">High</text>
  <text x="40" y="330" text-anchor="middle" font-size="9" fill="#888">Low</text>
  <text x="637" y="333" text-anchor="start" font-size="9" fill="#888">→ t</text>

  <!-- Regime labels on x-axis -->
  <text x="120" y="343" text-anchor="middle" font-size="9" fill="#27ae60">Expansion</text>
  <text x="260" y="343" text-anchor="middle" font-size="9" fill="#e67e22">Overheat</text>
  <text x="420" y="343" text-anchor="middle" font-size="9" fill="#e74c3c">Contraction</text>
  <text x="555" y="343" text-anchor="middle" font-size="9" fill="#3498db">Recovery</text>

  <!-- Transition boundary lines -->
  <line x1="200" y1="235" x2="200" y2="330" stroke="#e67e22" stroke-width="1" stroke-dasharray="4 3"/>
  <line x1="350" y1="235" x2="350" y2="330" stroke="#e74c3c" stroke-width="1" stroke-dasharray="4 3"/>
  <line x1="490" y1="235" x2="490" y2="330" stroke="#3498db" stroke-width="1" stroke-dasharray="4 3"/>
  <text x="200" y="233" text-anchor="middle" font-size="8" fill="#e67e22">transition</text>
  <text x="350" y="233" text-anchor="middle" font-size="8" fill="#e74c3c">transition</text>
  <text x="490" y="233" text-anchor="middle" font-size="8" fill="#3498db">transition</text>

  <!-- Entropy line: low during stable, spikes before transition -->
  <polyline points="60,322 100,320 140,319 160,318 170,310 190,292 210,280 240,276 280,280 310,295 330,280 345,258 360,268 390,278 410,315 440,319 460,320 480,308 495,285 510,295 530,310 550,318 580,320 620,321"
    fill="none" stroke="#8e44ad" stroke-width="2" stroke-linejoin="round"/>
  <!-- Fill under entropy -->
  <polygon points="60,322 100,320 140,319 160,318 170,310 190,292 210,280 240,276 280,280 310,295 330,280 345,258 360,268 390,278 410,315 440,319 460,320 480,308 495,285 510,295 530,310 550,318 580,320 620,321 620,330 60,330"
    fill="#8e44ad" opacity="0.12"/>

  <!-- Early warning annotations -->
  <text x="175" y="288" text-anchor="middle" font-size="9" fill="#e67e22" font-weight="bold">⚠ rising entropy</text>
  <text x="340" y="253" text-anchor="middle" font-size="9" fill="#e74c3c" font-weight="bold">⚠ peak uncertainty</text>
  <text x="490" y="281" text-anchor="middle" font-size="9" fill="#3498db" font-weight="bold">⚠ new regime</text>

  <!-- Bottom note -->
  <text x="340" y="367" text-anchor="middle" font-size="10" fill="#888">Entropy peaks before macro indicators confirm the transition — a 2–6 week early warning window.</text>
</svg>
