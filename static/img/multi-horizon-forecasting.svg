<svg viewBox="0 0 900 560" xmlns="http://www.w3.org/2000/svg" font-family="system-ui, -apple-system, sans-serif">
  <!-- Background -->
  <rect width="900" height="560" fill="#f8fafc" rx="12"/>
  <text x="450" y="36" text-anchor="middle" font-size="18" font-weight="700" fill="#1e293b">Multi-Horizon Forecasting Architecture</text>
  <text x="450" y="56" text-anchor="middle" font-size="12" fill="#64748b">Multi-Resolution Encoder · Latent State · Horizon-Specific Decoders</text>

  <defs>
    <marker id="arrowSlate" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#475569"/>
    </marker>
    <marker id="arrowViolet" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#7c3aed"/>
    </marker>
  </defs>

  <!-- Input streams (left) -->
  <rect x="20" y="80" width="130" height="52" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="85" y="103" text-anchor="middle" font-size="11" font-weight="600" fill="#1d4ed8">1-min bars</text>
  <text x="85" y="121" text-anchor="middle" font-size="10" fill="#3b82f6">micro resolution</text>

  <rect x="20" y="160" width="130" height="52" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="85" y="183" text-anchor="middle" font-size="11" font-weight="600" fill="#1d4ed8">15-min bars</text>
  <text x="85" y="201" text-anchor="middle" font-size="10" fill="#3b82f6">meso resolution</text>

  <rect x="20" y="240" width="130" height="52" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="85" y="263" text-anchor="middle" font-size="11" font-weight="600" fill="#1d4ed8">Daily OHLCV</text>
  <text x="85" y="281" text-anchor="middle" font-size="10" fill="#3b82f6">macro resolution</text>

  <!-- TCN encoders -->
  <rect x="190" y="80" width="110" height="52" rx="8" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5"/>
  <text x="245" y="103" text-anchor="middle" font-size="11" font-weight="600" fill="#5b21b6">Micro TCN</text>
  <text x="245" y="121" text-anchor="middle" font-size="10" fill="#7c3aed">d=64</text>

  <rect x="190" y="160" width="110" height="52" rx="8" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5"/>
  <text x="245" y="183" text-anchor="middle" font-size="11" font-weight="600" fill="#5b21b6">Meso TCN</text>
  <text x="245" y="201" text-anchor="middle" font-size="10" fill="#7c3aed">d=128</text>

  <rect x="190" y="240" width="110" height="52" rx="8" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5"/>
  <text x="245" y="263" text-anchor="middle" font-size="11" font-weight="600" fill="#5b21b6">Macro TCN</text>
  <text x="245" y="281" text-anchor="middle" font-size="10" fill="#7c3aed">d=256</text>

  <!-- Arrows: inputs → TCNs -->
  <line x1="150" y1="106" x2="188" y2="106" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrowViolet)"/>
  <line x1="150" y1="186" x2="188" y2="186" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrowViolet)"/>
  <line x1="150" y1="266" x2="188" y2="266" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrowViolet)"/>

  <!-- Fusion/Cross-Attention block -->
  <rect x="350" y="140" width="130" height="80" rx="10" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.8"/>
  <text x="415" y="168" text-anchor="middle" font-size="12" font-weight="600" fill="#5b21b6">Cross-Attention</text>
  <text x="415" y="186" text-anchor="middle" font-size="11" fill="#7c3aed">Fusion Layer</text>
  <text x="415" y="204" text-anchor="middle" font-size="10" fill="#7c3aed">d=512</text>

  <!-- Arrows TCNs → Fusion -->
  <line x1="300" y1="106" x2="348" y2="165" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrowViolet)"/>
  <line x1="300" y1="186" x2="348" y2="186" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrowViolet)"/>
  <line x1="300" y1="266" x2="348" y2="207" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrowViolet)"/>

  <!-- Latent State z_0 -->
  <rect x="530" y="155" width="120" height="60" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.8"/>
  <text x="590" y="181" text-anchor="middle" font-size="13" font-weight="600" fill="#92400e">Latent State</text>
  <text x="590" y="199" text-anchor="middle" font-size="12" fill="#b45309">z₀ ∈ ℝ⁵¹²</text>

  <!-- Arrow: Fusion → Latent -->
  <line x1="480" y1="180" x2="528" y2="180" stroke="#7c3aed" stroke-width="1.8" marker-end="url(#arrowViolet)"/>

  <!-- GRU Dynamics -->
  <rect x="530" y="270" width="120" height="55" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="590" y="293" text-anchor="middle" font-size="11" font-weight="600" fill="#92400e">GRU Dynamics</text>
  <text x="590" y="311" text-anchor="middle" font-size="10" fill="#b45309">multi-step rollout</text>
  <line x1="590" y1="215" x2="590" y2="268" stroke="#f59e0b" stroke-width="1.5" marker-end="url(#arrowViolet)"/>

  <!-- Horizon heads (right side) -->
  <!-- Next Minute -->
  <rect x="710" y="70" width="160" height="66" rx="9" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5"/>
  <text x="790" y="93" text-anchor="middle" font-size="12" font-weight="600" fill="#15803d">Next Minute</text>
  <text x="790" y="111" text-anchor="middle" font-size="10" fill="#166534">1 step · HFT / market-making</text>
  <text x="790" y="127" text-anchor="middle" font-size="10" fill="#166534">μ ± σ distribution</text>

  <!-- Next Hour -->
  <rect x="710" y="160" width="160" height="66" rx="9" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5"/>
  <text x="790" y="183" text-anchor="middle" font-size="12" font-weight="600" fill="#15803d">Next Hour</text>
  <text x="790" y="201" text-anchor="middle" font-size="10" fill="#166534">60 steps · intra-day</text>
  <text x="790" y="217" text-anchor="middle" font-size="10" fill="#166534">μ ± σ distribution</text>

  <!-- Next Day -->
  <rect x="710" y="250" width="160" height="66" rx="9" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5"/>
  <text x="790" y="273" text-anchor="middle" font-size="12" font-weight="600" fill="#15803d">Next Day</text>
  <text x="790" y="291" text-anchor="middle" font-size="10" fill="#166534">390 steps · swing trading</text>
  <text x="790" y="307" text-anchor="middle" font-size="10" fill="#166534">μ ± σ distribution</text>

  <!-- Next Week -->
  <rect x="710" y="340" width="160" height="66" rx="9" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5"/>
  <text x="790" y="363" text-anchor="middle" font-size="12" font-weight="600" fill="#15803d">Next Week</text>
  <text x="790" y="381" text-anchor="middle" font-size="10" fill="#166534">1950 steps · medium-term</text>
  <text x="790" y="397" text-anchor="middle" font-size="10" fill="#166534">μ ± σ distribution</text>

  <!-- Arrows: Dynamics → Horizon heads -->
  <line x1="650" y1="295" x2="690" y2="295" stroke="#475569" stroke-width="1.2"/>
  <line x1="690" y1="103" x2="708" y2="103" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowViolet)"/>
  <line x1="690" y1="193" x2="708" y2="193" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowViolet)"/>
  <line x1="690" y1="283" x2="708" y2="283" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowViolet)"/>
  <line x1="690" y1="373" x2="708" y2="373" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowViolet)"/>
  <!-- Vertical connector from dynamics to all horizons -->
  <line x1="690" y1="103" x2="690" y2="373" stroke="#475569" stroke-width="1.2"/>

  <!-- Economic Event conditioning (bottom) -->
  <rect x="140" y="370" width="180" height="60" rx="9" fill="#fee2e2" stroke="#ef4444" stroke-width="1.5"/>
  <text x="230" y="395" text-anchor="middle" font-size="12" font-weight="600" fill="#b91c1c">Economic Events</text>
  <text x="230" y="413" text-anchor="middle" font-size="10" fill="#dc2626">CPI · NFP · Fed · Earnings</text>
  <text x="230" y="429" text-anchor="middle" font-size="10" fill="#dc2626">gated latent update</text>

  <!-- Arrow: events → latent state -->
  <line x1="320" y1="400" x2="510" y2="195" stroke="#ef4444" stroke-width="1.3" stroke-dasharray="5,3" marker-end="url(#arrowSlate)"/>

  <!-- Legend -->
  <rect x="30" y="470" width="260" height="70" rx="8" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
  <text x="45" y="490" font-size="11" font-weight="600" fill="#475569">Legend</text>
  <rect x="45" y="500" width="14" height="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="1"/>
  <text x="65" y="511" font-size="10" fill="#475569">Raw market data</text>
  <rect x="45" y="518" width="14" height="10" fill="#ede9fe" stroke="#7c3aed" stroke-width="1"/>
  <text x="65" y="529" font-size="10" fill="#475569">Encoding / latent state</text>
  <rect x="155" y="500" width="14" height="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
  <text x="175" y="511" font-size="10" fill="#475569">Dynamics model</text>
  <rect x="155" y="518" width="14" height="10" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="175" y="529" font-size="10" fill="#475569">Horizon outputs</text>
</svg>
