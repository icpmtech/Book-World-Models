<svg viewBox="0 0 900 620" xmlns="http://www.w3.org/2000/svg" font-family="system-ui, -apple-system, sans-serif">
  <!-- Background -->
  <rect width="900" height="620" fill="#f8fafc" rx="12"/>
  <text x="450" y="38" text-anchor="middle" font-size="18" font-weight="700" fill="#1e293b">Ontology-Driven World Model Architecture</text>
  <text x="450" y="58" text-anchor="middle" font-size="12" fill="#64748b">Palantir Foundry Paradigm Applied to Financial World Models</text>

  <!-- ── Ontology Layer (top) ── -->
  <rect x="60" y="80" width="780" height="110" rx="10" fill="#eff6ff" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="450" y="101" text-anchor="middle" font-size="13" font-weight="600" fill="#1d4ed8">Ontology Layer (Knowledge Graph)</text>

  <!-- Ontology nodes -->
  <ellipse cx="140" cy="136" rx="52" ry="22" fill="#bfdbfe" stroke="#2563eb" stroke-width="1.2"/>
  <text x="140" y="140" text-anchor="middle" font-size="11" fill="#1e3a8a">Asset</text>

  <ellipse cx="260" cy="136" rx="52" ry="22" fill="#bfdbfe" stroke="#2563eb" stroke-width="1.2"/>
  <text x="260" y="140" text-anchor="middle" font-size="11" fill="#1e3a8a">Market Event</text>

  <ellipse cx="390" cy="136" rx="52" ry="22" fill="#bfdbfe" stroke="#2563eb" stroke-width="1.2"/>
  <text x="390" y="140" text-anchor="middle" font-size="11" fill="#1e3a8a">Entity</text>

  <ellipse cx="520" cy="136" rx="52" ry="22" fill="#bfdbfe" stroke="#2563eb" stroke-width="1.2"/>
  <text x="520" y="140" text-anchor="middle" font-size="11" fill="#1e3a8a">Relationship</text>

  <ellipse cx="650" cy="136" rx="52" ry="22" fill="#bfdbfe" stroke="#2563eb" stroke-width="1.2"/>
  <text x="650" y="140" text-anchor="middle" font-size="11" fill="#1e3a8a">Signal</text>

  <ellipse cx="780" cy="136" rx="52" ry="22" fill="#bfdbfe" stroke="#2563eb" stroke-width="1.2"/>
  <text x="780" y="140" text-anchor="middle" font-size="11" fill="#1e3a8a">Action</text>

  <!-- Connecting lines inside ontology layer -->
  <line x1="192" y1="136" x2="208" y2="136" stroke="#93c5fd" stroke-width="1.2" marker-end="url(#arrowBlue)"/>
  <line x1="312" y1="136" x2="338" y2="136" stroke="#93c5fd" stroke-width="1.2" marker-end="url(#arrowBlue)"/>
  <line x1="442" y1="136" x2="468" y2="136" stroke="#93c5fd" stroke-width="1.2" marker-end="url(#arrowBlue)"/>
  <line x1="572" y1="136" x2="598" y2="136" stroke="#93c5fd" stroke-width="1.2" marker-end="url(#arrowBlue)"/>
  <line x1="702" y1="136" x2="728" y2="136" stroke="#93c5fd" stroke-width="1.2" marker-end="url(#arrowBlue)"/>

  <!-- ── LLM Integration Layer ── -->
  <rect x="60" y="220" width="370" height="110" rx="10" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.5"/>
  <text x="245" y="243" text-anchor="middle" font-size="13" font-weight="600" fill="#15803d">LLM Integration Layer</text>

  <rect x="85" y="258" width="145" height="54" rx="7" fill="#dcfce7" stroke="#16a34a" stroke-width="1"/>
  <text x="157" y="279" text-anchor="middle" font-size="11" font-weight="600" fill="#14532d">Ontology-Aware LLM</text>
  <text x="157" y="295" text-anchor="middle" font-size="10" fill="#166534">Query &amp; Reasoning</text>

  <rect x="250" y="258" width="155" height="54" rx="7" fill="#dcfce7" stroke="#16a34a" stroke-width="1"/>
  <text x="327" y="279" text-anchor="middle" font-size="11" font-weight="600" fill="#14532d">Semantic Embedding</text>
  <text x="327" y="295" text-anchor="middle" font-size="10" fill="#166534">Ontology → Vectors</text>

  <!-- ── LLM Agent Layer ── -->
  <rect x="470" y="220" width="370" height="110" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="655" y="243" text-anchor="middle" font-size="13" font-weight="600" fill="#92400e">LLM Agent Orchestration</text>

  <rect x="495" y="258" width="140" height="54" rx="7" fill="#fde68a" stroke="#d97706" stroke-width="1"/>
  <text x="565" y="279" text-anchor="middle" font-size="11" font-weight="600" fill="#78350f">Analyst Agent</text>
  <text x="565" y="295" text-anchor="middle" font-size="10" fill="#92400e">Research &amp; Insights</text>

  <rect x="655" y="258" width="160" height="54" rx="7" fill="#fde68a" stroke="#d97706" stroke-width="1"/>
  <text x="735" y="279" text-anchor="middle" font-size="11" font-weight="600" fill="#78350f">Portfolio Agent</text>
  <text x="735" y="295" text-anchor="middle" font-size="10" fill="#92400e">Decision &amp; Execution</text>

  <!-- ── World Model Core ── -->
  <rect x="160" y="365" width="580" height="120" rx="10" fill="#fdf4ff" stroke="#a855f7" stroke-width="2"/>
  <text x="450" y="390" text-anchor="middle" font-size="14" font-weight="700" fill="#7e22ce">World Model Core</text>

  <rect x="185" y="405" width="120" height="60" rx="7" fill="#f3e8ff" stroke="#9333ea" stroke-width="1"/>
  <text x="245" y="428" text-anchor="middle" font-size="11" font-weight="600" fill="#6b21a8">Vision / Encoder</text>
  <text x="245" y="444" text-anchor="middle" font-size="10" fill="#7c3aed">Latent z_t</text>

  <rect x="330" y="405" width="120" height="60" rx="7" fill="#f3e8ff" stroke="#9333ea" stroke-width="1"/>
  <text x="390" y="428" text-anchor="middle" font-size="11" font-weight="600" fill="#6b21a8">Memory / Dynamics</text>
  <text x="390" y="444" text-anchor="middle" font-size="10" fill="#7c3aed">Rollout z_{t+H}</text>

  <rect x="475" y="405" width="120" height="60" rx="7" fill="#f3e8ff" stroke="#9333ea" stroke-width="1"/>
  <text x="535" y="428" text-anchor="middle" font-size="11" font-weight="600" fill="#6b21a8">Controller</text>
  <text x="535" y="444" text-anchor="middle" font-size="10" fill="#7c3aed">Policy π(z_t)</text>

  <rect x="620" y="405" width="100" height="60" rx="7" fill="#f3e8ff" stroke="#9333ea" stroke-width="1"/>
  <text x="670" y="428" text-anchor="middle" font-size="11" font-weight="600" fill="#6b21a8">Decoder</text>
  <text x="670" y="444" text-anchor="middle" font-size="10" fill="#7c3aed">Price Dist.</text>

  <!-- Arrows inside world model -->
  <line x1="305" y1="435" x2="328" y2="435" stroke="#9333ea" stroke-width="1.5" marker-end="url(#arrowPurple)"/>
  <line x1="450" y1="435" x2="473" y2="435" stroke="#9333ea" stroke-width="1.5" marker-end="url(#arrowPurple)"/>
  <line x1="595" y1="435" x2="618" y2="435" stroke="#9333ea" stroke-width="1.5" marker-end="url(#arrowPurple)"/>

  <!-- ── Output Layer ── -->
  <rect x="160" y="515" width="580" height="70" rx="10" fill="#fff1f2" stroke="#f43f5e" stroke-width="1.5"/>
  <text x="450" y="537" text-anchor="middle" font-size="13" font-weight="600" fill="#be123c">Output Layer</text>

  <text x="255" y="560" text-anchor="middle" font-size="11" fill="#9f1239">Price Distributions</text>
  <text x="450" y="560" text-anchor="middle" font-size="11" fill="#9f1239">Portfolio Allocations</text>
  <text x="645" y="560" text-anchor="middle" font-size="11" fill="#9f1239">Risk Signals &amp; Alerts</text>

  <!-- ── Vertical connectors ── -->
  <!-- Ontology → LLM layers -->
  <line x1="245" y1="190" x2="245" y2="218" stroke="#3b82f6" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrowBlue)"/>
  <line x1="655" y1="190" x2="655" y2="218" stroke="#3b82f6" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrowBlue)"/>

  <!-- LLM layers → World Model Core -->
  <line x1="245" y1="330" x2="300" y2="363" stroke="#22c55e" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrowGreen)"/>
  <line x1="655" y1="330" x2="600" y2="363" stroke="#f59e0b" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrowAmber)"/>

  <!-- World Model → Output -->
  <line x1="450" y1="485" x2="450" y2="513" stroke="#a855f7" stroke-width="1.5" marker-end="url(#arrowPurple)"/>

  <!-- ── Arrow markers ── -->
  <defs>
    <marker id="arrowBlue" markerWidth="7" markerHeight="7" refX="5" refY="3.5" orient="auto">
      <path d="M0,0 L7,3.5 L0,7 Z" fill="#3b82f6"/>
    </marker>
    <marker id="arrowGreen" markerWidth="7" markerHeight="7" refX="5" refY="3.5" orient="auto">
      <path d="M0,0 L7,3.5 L0,7 Z" fill="#22c55e"/>
    </marker>
    <marker id="arrowAmber" markerWidth="7" markerHeight="7" refX="5" refY="3.5" orient="auto">
      <path d="M0,0 L7,3.5 L0,7 Z" fill="#f59e0b"/>
    </marker>
    <marker id="arrowPurple" markerWidth="7" markerHeight="7" refX="5" refY="3.5" orient="auto">
      <path d="M0,0 L7,3.5 L0,7 Z" fill="#a855f7"/>
    </marker>
  </defs>
</svg>
